<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BIP85KMS Client-side Demo</title>
    <style>
      body { font-family: system-ui, sans-serif; margin: 2rem auto; max-width: 900px; padding: 0 1rem; }
      form { display: grid; gap: .75rem; }
      input, textarea, button { padding: .6rem; font: inherit; }
      textarea { min-height: 80px; }
      .row { display:grid; gap:.75rem; grid-template-columns: 1fr 1fr 1fr; }
      .warn { background: #fff7e6; border: 1px solid #ffd591; padding: .75rem; border-radius: 6px; }
      pre { background: #f6f8fa; padding: 1rem; border-radius: 6px; overflow:auto; }
    </style>
    <script type="importmap">
      {
        "imports": {
          "@scure/bip32": "https://esm.sh/@scure/bip32@1.6.2",
          "@scure/bip39": "https://esm.sh/@scure/bip39@1.5.4",
          "@noble/hashes/sha256": "https://esm.sh/@noble/hashes@1.7.1/sha256",
          "@noble/hashes/hmac": "https://esm.sh/@noble/hashes@1.7.1/hmac",
          "@noble/hashes/argon2": "https://esm.sh/@noble/hashes@1.7.1/argon2",
          "@noble/curves/ed25519": "https://esm.sh/@noble/curves@1.8.2/ed25519",
          "bech32": "https://esm.sh/bech32@2.0.0"
        }
      }
    </script>
  </head>
  <body>
    <h1>BIP85KMS â€” Client-side Derivation</h1>
    <p>This page runs fully in the browser and uses the same derivation functions as the Worker.</p>
    <div class="warn"><strong>Warning:</strong> The mnemonic entered here is sensitive. Use only for local testing and only in trusted environments.</div>

    <form id="derive-form">
      <label>Mnemonic
        <textarea id="mnemonic" required placeholder="bacon bacon ..."></textarea>
      </label>
      <div class="row">
        <label>Filename <input id="filename" value="README.md" required /></label>
        <label>Key Version <input id="keyVersion" type="number" min="0" value="1" required /></label>
        <label>App ID <input id="appId" value="docs" required /></label>
      </div>
      <label><input id="getPrivateKey" type="checkbox" checked /> Include private material</label>
      <button type="submit">Derive</button>
    </form>

    <h2>Result</h2>
    <pre id="output">Run derivation to view output.</pre>

    <script type="module" src="./web/app.js"></script>
  </body>
</html>
